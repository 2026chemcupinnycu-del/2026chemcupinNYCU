<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å¤§åŒ–ç›ƒæŠ½ç±¤ç³»çµ± - åŒæ ¡è¿´é¿ç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-5">
    <div id="draw-app" class="max-w-4xl mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-black text-[#001f54]">ç”·ç±ƒé è³½æŠ½ç±¤</h1>
            <p class="text-gray-500 font-bold">è¦å‰‡ï¼šåŒæ ¡ç³»è‡ªå‹•è¿´é¿åˆ†çµ„</p>
        </header>

        <div class="text-center mb-10">
            <button @click="startSmartDraw" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-black py-4 px-10 rounded-full shadow-lg transition-transform active:scale-95 text-xl">
                ğŸ² é–‹å§‹ã€ŒåŒæ ¡è¿´é¿ã€æŠ½ç±¤
            </button>
        </div>

        <div v-if="groups.length > 0" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div v-for="group in groups" :key="group.name" class="bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="bg-[#001f54] text-white py-3 text-center font-black">
                    {{ group.name }} ({{ group.teams.length }} éšŠ)
                </div>
                <div class="p-5">
                    <ul class="space-y-3">
                        <li v-for="(team, idx) in group.teams" class="flex items-center font-bold text-gray-700">
                            <span class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-xs mr-3 text-gray-400">
                                {{ group.name }}{{ idx + 1 }}
                            </span>
                            {{ team }}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    // åå–®ç¯„ä¾‹ï¼šè«‹ç¢ºä¿åŒæ ¡ç³»çš„åç¨±åŒ…å«ç›¸åŒçš„é—œéµå­—ï¼ˆå¦‚ï¼šä¸­èˆˆAã€ä¸­èˆˆBï¼‰
                    rawTeams: [
                        "ä¸­èˆˆåŒ–å­¸A", "ä¸­èˆˆåŒ–å­¸B", "äº¤å¤§åŒ–å­¸", "æ¸…å¤§åŒ–å­¸A", "æ¸…å¤§åŒ–å­¸B", 
                        "å°å¤§åŒ–å­¸", "æˆå¤§åŒ–å­¸", "ä¸­å¤®åŒ–å­¸", "ä¸­å±±åŒ–å­¸", "ä¸­æ­£åŒ–å­¸",
                        "å¸«å¤§åŒ–å­¸", "å½°å¸«åŒ–å­¸", "é«˜å¸«åŒ–å­¸", "æ±å¤§åŒ–å­¸", "æ·¡å¤§åŒ–å­¸",
                        "è¼”å¤§åŒ–å­¸", "æ±æµ·åŒ–å­¸", "é€¢ç”²åŒ–å­¸", "ä¸­åŸåŒ–å­¸", "æ–‡åŒ–åŒ–å­¸", "éœå®œåŒ–å­¸"
                    ],
                    groups: []
                }
            },
            methods: {
                startSmartDraw() {
                    // 1. å…ˆå°‡éšŠä¼æŒ‰æ ¡ç³»åˆ†ç¾¤
                    const schoolGroups = {};
                    this.rawTeams.forEach(team => {
                        // é€™è£¡å‡è¨­åç¨±å‰å…©å€‹å­—æ˜¯æ ¡åï¼Œä¾‹å¦‚ã€Œä¸­èˆˆã€ã€ã€Œæ¸…å¤§ã€
                        const school = team.substring(0, 2); 
                        if (!schoolGroups[school]) schoolGroups[school] = [];
                        schoolGroups[school].push(team);
                    });

                    // 2. å°‡åˆ†ç¾¤å¾Œçš„éšŠä¼æ‰“äº‚ï¼Œä¸¦å±•é–‹æˆä¸€å€‹ã€Œäº¤éŒ¯ã€çš„æ¸…å–®
                    let schools = Object.keys(schoolGroups).sort(() => Math.random() - 0.5);
                    let balancedList = [];
                    
                    // å–å¾—æœ€å¤šéšŠä¼çš„å­¸æ ¡æ•¸é‡
                    const maxPerSchool = Math.max(...Object.values(schoolGroups).map(a => a.length));
                    
                    for (let i = 0; i < maxPerSchool; i++) {
                        schools.forEach(school => {
                            if (schoolGroups[school][i]) {
                                balancedList.push(schoolGroups[school][i]);
                            }
                        });
                    }

                    // 3. è¨­å®šåˆ†çµ„çµæ§‹ (A,B,Cçµ„ 4äºº; D,E,Fçµ„ 3äºº)
                    const structure = [
                        { name: 'Açµ„', count: 4 }, { name: 'Bçµ„', count: 4 }, { name: 'Cçµ„', count: 4 },
                        { name: 'Dçµ„', count: 3 }, { name: 'Eçµ„', count: 3 }, { name: 'Fçµ„', count: 3 }
                    ];

                    // 4. åˆ†é…é€²å…¥çµ„åˆ¥
                    let current = 0;
                    this.groups = structure.map(group => {
                        const teams = balancedList.slice(current, current + group.count);
                        current += group.count;
                        // çµ„å…§å†å°æ‰“äº‚ä¸€ä¸‹é †åº
                        return { name: group.name, teams: teams.sort(() => Math.random() - 0.5) };
                    });
                }
            }
        }).mount('#draw-app');
    </script>
</body>
</html>
