<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å¤§åŒ–ç›ƒæŠ½ç±¤ç³»çµ± - æ­£å¼ç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-5">
    <div id="draw-app" class="max-w-5xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-black text-[#001f54] mb-2">2026 å¤§åŒ–ç›ƒé è³½æŠ½ç±¤</h1>
            <div class="inline-block bg-blue-100 text-blue-800 px-4 py-1 rounded-full text-sm font-bold">
                ç”·ç±ƒ 21 éšŠï¼š3çµ„(4éšŠ) + 3çµ„(3éšŠ)
            </div>
            <p class="text-gray-400 text-xs mt-3">ç³»çµ±è¦å‰‡ï¼šåŒæ ¡ç³»è‡ªå‹•è¿´é¿åˆ†çµ„</p>
        </header>

        <div class="text-center mb-10">
            <button @click="startSmartDraw" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-black py-4 px-12 rounded-2xl shadow-xl transition-all active:scale-95 text-xl border-b-4 border-yellow-600">
                ğŸ² é–‹å§‹åŒæ ¡è¿´é¿æŠ½ç±¤
            </button>
        </div>

        <div v-if="groups.length > 0" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div v-for="group in groups" :key="group.name" class="bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden transition-all hover:shadow-md">
                <div class="bg-[#001f54] text-white py-4 text-center font-black tracking-widest text-lg">
                    {{ group.name }} <span class="text-yellow-400 text-sm">({{ group.teams.length }}éšŠ)</span>
                </div>
                <div class="p-6">
                    <ul class="space-y-4">
                        <li v-for="(team, idx) in group.teams" class="flex items-center font-bold text-gray-700 bg-gray-50 p-3 rounded-xl border border-gray-100">
                            <span class="w-10 h-10 bg-[#001f54] text-white rounded-lg flex items-center justify-center text-xs mr-4 shadow-sm">
                                {{ group.name.charAt(0) }}{{ idx + 1 }}
                            </span>
                            <span class="text-[15px]">{{ team }}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <footer class="mt-12 text-center text-gray-400 text-[10px] font-bold uppercase tracking-[0.2em]">
            2026 Chemistry Cup Lottery System
        </footer>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    rawTeams: [
                        "ä¸­å±±é†«åŒ–", "æ±æµ·åŒ–å­¸", "è‡ºå¸«ç¯„åŒ–å­¸", "æ·¡æ±ŸåŒ–æ", "å˜‰å¤§æ‡‰åŒ–", 
                        "æˆå¤§åŒ–å­¸A", "æˆå¤§åŒ–å­¸B", "æ·¡æ±ŸåŒ–å­¸", "å—å¤§ç¶ èƒ½", "ä¸­èˆˆåŒ–å­¸", 
                        "é«˜é†«é†«åŒ–A", "é«˜é†«é†«åŒ–B", "å°å¤§åŒ–å­¸", "æ¸…å¤§åŒ–å­¸", "ä¸­æ­£åŒ–ç”Ÿ", 
                        "ä¸­åŸåŒ–å­¸", "äº¤å¤§æ‡‰åŒ–A", "äº¤å¤§æ‡‰åŒ–B", "æ±å³åŒ–å­¸", "è¼”ä»åŒ–å­¸A", "è¼”ä»åŒ–å­¸B"
                    ],
                    groups: []
                }
            },
            methods: {
                startSmartDraw() {
                    // 1. åŒæ ¡åˆ¤å®šé‚è¼¯
                    const schoolGroups = {};
                    this.rawTeams.forEach(team => {
                        let schoolKey = team.substring(0, 2);
                        if(team.includes("æ·¡æ±Ÿ")) schoolKey = "æ·¡æ±Ÿ";
                        if(team.includes("äº¤å¤§")) schoolKey = "äº¤å¤§";
                        if(team.includes("æˆå¤§")) schoolKey = "æˆå¤§";
                        if(team.includes("é«˜é†«")) schoolKey = "é«˜é†«";
                        if(team.includes("è¼”ä»")) schoolKey = "è¼”ä»";
                        
                        if (!schoolGroups[schoolKey]) schoolGroups[schoolKey] = [];
                        schoolGroups[schoolKey].push(team);
                    });

                    // 2. æ‰“äº‚æ ¡ç³»é †åº
                    let schools = Object.keys(schoolGroups).sort(() => Math.random() - 0.5);
                    let balancedList = [];
                    const maxPerSchool = Math.max(...Object.values(schoolGroups).map(a => a.length));
                    
                    // 3. äº¤éŒ¯å¡«å…¥åå–®
                    for (let i = 0; i < maxPerSchool; i++) {
                        schools.forEach(school => {
                            if (schoolGroups[school][i]) {
                                balancedList.push(schoolGroups[school][i]);
                            }
                        });
                    }

                    // 4. å®šç¾©åˆ†çµ„çµæ§‹
                    const structure = [
                        { name: 'Açµ„', count: 4 }, { name: 'Bçµ„', count: 4 }, { name: 'Cçµ„', count: 4 },
                        { name: 'Dçµ„', count: 3 }, { name: 'Eçµ„', count: 3 }, { name: 'Fçµ„', count: 3 }
                    ];

                    // 5. åˆ†é…é€²å…¥çµ„åˆ¥
                    let current = 0;
                    this.groups = structure.map(group => {
                        const teams = balancedList.slice(current, current + group.count);
                        current += group.count;
                        return { name: group.name, teams: teams.sort(() => Math.random() - 0.5) };
                    });
                }
            }
        }).mount('#draw-app');
    </script>
</body>
</html>
